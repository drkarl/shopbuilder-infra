# ShopBuilder Docker Compose Environment Configuration
# Copy this file to .env and fill in the values

# =============================================================================
# Spring Application Settings
# =============================================================================
SPRING_PROFILES_ACTIVE=production

# =============================================================================
# Container Images
# =============================================================================
FRONTEND_IMAGE=shopbuilder/frontend:latest
SPRING_API_IMAGE=shopbuilder/spring-api:latest
SPRING_WORKERS_IMAGE=shopbuilder/spring-workers:latest

# =============================================================================
# Database Configuration (external PostgreSQL - not managed by this compose file)
# =============================================================================
SPRING_DATASOURCE_URL=jdbc:postgresql://db-host:5432/shopbuilder
SPRING_DATASOURCE_USERNAME=shopbuilder
# REQUIRED: Set a strong password for database access
SPRING_DATASOURCE_PASSWORD=

# =============================================================================
# RabbitMQ Configuration
# =============================================================================
RABBITMQ_USERNAME=shopbuilder
# REQUIRED: Set a strong password for RabbitMQ
RABBITMQ_PASSWORD=
RABBITMQ_VHOST=shopbuilder
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# =============================================================================
# AWS Configuration
# =============================================================================
# REQUIRED: AWS credentials for S3 access
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=eu-central-1
# REQUIRED: S3 bucket name for asset storage
S3_BUCKET_NAME=

# =============================================================================
# Security
# =============================================================================
# REQUIRED: Generate a strong random string for JWT secret, e.g.:
#   openssl rand -base64 64
JWT_SECRET=

# =============================================================================
# Port Configuration
# =============================================================================
FRONTEND_PORT=3000
SPRING_API_PORT=8080

# =============================================================================
# Worker Configuration
# =============================================================================
WORKER_CONCURRENCY=4

# =============================================================================
# Resource Limits - Spring API
# =============================================================================
SPRING_API_CPU_LIMIT=2.0
SPRING_API_MEMORY_LIMIT=2G
SPRING_API_CPU_RESERVATION=0.5
SPRING_API_MEMORY_RESERVATION=512M

# =============================================================================
# Resource Limits - Spring Workers
# =============================================================================
SPRING_WORKERS_CPU_LIMIT=2.0
SPRING_WORKERS_MEMORY_LIMIT=2G
SPRING_WORKERS_CPU_RESERVATION=0.5
SPRING_WORKERS_MEMORY_RESERVATION=512M

# =============================================================================
# Resource Limits - Frontend
# =============================================================================
FRONTEND_CPU_LIMIT=0.5
FRONTEND_MEMORY_LIMIT=256M
FRONTEND_CPU_RESERVATION=0.1
FRONTEND_MEMORY_RESERVATION=64M

# =============================================================================
# Resource Limits - RabbitMQ
# =============================================================================
RABBITMQ_CPU_LIMIT=1.0
RABBITMQ_MEMORY_LIMIT=512M
RABBITMQ_CPU_RESERVATION=0.25
RABBITMQ_MEMORY_RESERVATION=256M

# =============================================================================
# Frontend Build Arguments (used when building the frontend Docker image)
# =============================================================================
# These are passed as --build-arg when building the frontend image:
#   docker build --build-arg VITE_API_URL=$VITE_API_URL ...
# VITE_API_URL=https://api.example.com
# VITE_SUPABASE_URL=https://xxx.supabase.co
# VITE_SUPABASE_ANON_KEY=
